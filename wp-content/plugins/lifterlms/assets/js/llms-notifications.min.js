!function(f){window.llms=window.llms||{},window.llms.notifications=new function(){var t,s=this,i=window.llms&&window.llms.notification_settings?window.llms.notification_settings:{},n=i.heartbeat_interval?i.heartbeat_interval:2e4,o=[],e=[];function a(t){-1===e.indexOf(t)&&e.push(t)}function r(t){pump(function(){t&&"unload"===t||!s.has_notifications||s.show_all()})}function l(){t=setInterval(r,n)}return pump=function(i){var n=!!e.length;LLMS.Ajax.call({data:{action:"notifications_heartbeart",dismissals:e},beforeSend:function(){if(s.block_ajax)return s.restart_heartbeat=!0,clearInterval(t),i(),!1;s.block_ajax=!0},complete:function(){s.restart_heartbeat&&(s.restart_heartbeat=!1,l()),s.block_ajax=!1},success:function(t){e=n?[]:e,t.success&&t.data&&s.queue(t.data.new),i()}})},this.block_ajax=!1,this.restart_heartbeat=!1,this.init=function(){this.is_user_logged_in()&&(window.onbeforeunload=function(){r("unload")},f("body").on("click",".llms-notification-dismiss",function(){s.dismiss(f(this).closest(".llms-notification"))}),r(),l())},this.queue=function(t){for(var i in t)t.hasOwnProperty(i)&&!1===this.notification_exists(t[i].id)&&o.push(t[i])},this.dismiss=function(t){var i=this;t.removeClass("visible"),a(t.attr("data-id")),setTimeout(function(){i.reposition(t.next(".llms-notification.visible"))},10)},this.notification_exists=function(t){for(var i in o)if(o.hasOwnProperty(i)&&t===o[i].id)return i;return!1},this.get_offset=function(t){return t||(t=f(".llms-notification.visible").last()),t.offset()?t.offset().top+t.outerHeight()+12:24},this.has_notifications=function(){return o.length},this.is_user_logged_in=function(){return f("body").hasClass("logged-in")},this.reposition=function(t){var i,n=this,s=".llms-notification.visible";t.length||(t=f(s).first()),t.css("top",n.get_offset(t.prevAll(s).first())),(i=t.next(s)).length&&setTimeout(function(){n.reposition(i)},150)},this.show_all=function(){var t,i=this,n=0;t=setInterval(function(){n<o.length?(o[n].shown||(o[n].shown=!0,i.show_one(o[n])),n++):clearInterval(t)},100)},this.show_one=function(t){var i=this,n=f(t.html);n.find("a").on("click",function(t){t.preventDefault();var i=f(this);a(n.attr("data-id")),window.location=i.attr("href")}),f("body").append(n),n.css("top",i.get_offset()),setTimeout(function(){n.addClass("visible")},1),n.attr("data-auto-dismiss")&&(a(n.attr("data-id")),setTimeout(function(){i.dismiss(n)},n.attr("data-auto-dismiss")))},this.init(),this}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtbm90aWZpY2F0aW9ucy5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwibGxtcyIsIm5vdGlmaWNhdGlvbnMiLCJoZWFydGJlYXQiLCJzZWxmIiwidGhpcyIsInNldHRpbmdzIiwibm90aWZpY2F0aW9uX3NldHRpbmdzIiwiaGVhcnRiZWF0X2ludGVydmFsIiwiZGlzbWlzc2FscyIsImFkZF9kaXNtaXNzYWwiLCJpZCIsImluZGV4T2YiLCJwdXNoIiwiZG9faGVhcnRiZWF0IiwidHJpZ2dlciIsInB1bXAiLCJoYXNfbm90aWZpY2F0aW9ucyIsInNob3dfYWxsIiwic3RhcnRfaGVhcnRiZWF0Iiwic2V0SW50ZXJ2YWwiLCJjYiIsImNsZWFyX2Rpc21pc3NhbHMiLCJsZW5ndGgiLCJMTE1TIiwiQWpheCIsImNhbGwiLCJkYXRhIiwiYWN0aW9uIiwiYmVmb3JlU2VuZCIsImJsb2NrX2FqYXgiLCJyZXN0YXJ0X2hlYXJ0YmVhdCIsImNsZWFySW50ZXJ2YWwiLCJjb21wbGV0ZSIsInN1Y2Nlc3MiLCJyIiwicXVldWUiLCJuZXciLCJpbml0IiwiaXNfdXNlcl9sb2dnZWRfaW4iLCJvbmJlZm9yZXVubG9hZCIsIm9uIiwiZGlzbWlzcyIsImNsb3Nlc3QiLCJuZXdfbm90aXMiLCJuIiwiaGFzT3duUHJvcGVydHkiLCJub3RpZmljYXRpb25fZXhpc3RzIiwiJGVsIiwicmVtb3ZlQ2xhc3MiLCJhdHRyIiwic2V0VGltZW91dCIsInJlcG9zaXRpb24iLCJuZXh0Iiwibm90aSIsImdldF9vZmZzZXQiLCIkcmVsYXRpdmVfZWwiLCJsYXN0Iiwib2Zmc2V0IiwidG9wIiwib3V0ZXJIZWlnaHQiLCJoYXNDbGFzcyIsIiRzdGFydF9lbCIsIiRuZXh0X2VsIiwic2VsZWN0b3IiLCJmaXJzdCIsImNzcyIsInByZXZBbGwiLCJpbnRlcnZhbCIsImkiLCJzaG93biIsInNob3dfb25lIiwiJGh0bWwiLCJodG1sIiwiZmluZCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIiR0aGlz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V0FBWU8sRUFBVUssUUFBU0gsR0FBV0MsV0FFckVGLEVBQVdELEVBQVVULEtBQU1XLElBQ2J6QyxRQUNiNEIsV0FBWSxXQUNYL0MsRUFBS2dELFdBQVlXLElBQ2YsTUFZTDFELEtBQUthLFNBQVcsV0FFZixJQUVDa0QsRUFGR2hFLEVBQU9DLEtBQ1ZnRSxFQUFJLEVBR0xELEVBQVdoRCxZQUFhLFdBRWxCaUQsRUFBSW5FLEVBQWNxQixRQUVmckIsRUFBZW1FLEdBQUlDLFFBQ3pCcEUsRUFBZW1FLEdBQUlDLE9BQVEsRUFDM0JsRSxFQUFLbUUsU0FBVXJFLEVBQWVtRSxLQUUvQkEsS0FJQXJDLGNBQWVvQyxJQUlkLE1BV0ovRCxLQUFLa0UsU0FBVyxTQUFVMUIsR0FFekIsSUFBSXpDLEVBQU9DLEtBQ1ZtRSxFQUFRekUsRUFBRzhDLEVBQUU0QixNQUVkRCxFQUFNRSxLQUFNLEtBQU1qQyxHQUFJLFFBQVMsU0FBVWtDLEdBQ3hDQSxFQUFFQyxpQkFDRixJQUFJQyxFQUFROUUsRUFBR00sTUFDZkssRUFBZThELEVBQU10QixLQUFNLFlBQzNCbEQsT0FBTzhFLFNBQVdELEVBQU0zQixLQUFNLFVBRy9CbkQsRUFBRyxRQUFTZ0YsT0FBUVAsR0FDcEJBLEVBQU1OLElBQUssTUFBTzlELEVBQUttRCxjQUV2QkosV0FBWSxXQUNYcUIsRUFBTVEsU0FBVSxZQUNkLEdBR0VSLEVBQU10QixLQUFNLHVCQUtoQnhDLEVBQWU4RCxFQUFNdEIsS0FBTSxZQUMzQkMsV0FBWSxXQUNYL0MsRUFBS3NDLFFBQVM4QixJQUNaQSxFQUFNdEIsS0FBTSx3QkFPakI3QyxLQUFLaUMsT0FFRWpDLE1BbllSLENBMFlJNEUiLCJmaWxlIjoibGxtcy1ub3RpZmljYXRpb25zLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGlmdGVyTE1TIEJhc2ljIE5vdGlmaWNhdGlvbnMgRGlzcGxheWVyXG4gKiBAc2luY2UgICAgMy44LjBcbiAqIEB2ZXJzaW9uICAzLjkuNVxuICovXG47KCBmdW5jdGlvbiggJCApIHtcblxuXHR2YXIgbGxtc19ub3RpZmljYXRpb25zID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRzZXR0aW5ncyA9ICggd2luZG93LmxsbXMgJiYgd2luZG93LmxsbXMubm90aWZpY2F0aW9uX3NldHRpbmdzICkgPyB3aW5kb3cubGxtcy5ub3RpZmljYXRpb25fc2V0dGluZ3MgOiB7fSxcblx0XHRcdGhlYXJ0YmVhdF9pbnRlcnZhbCA9IHNldHRpbmdzLmhlYXJ0YmVhdF9pbnRlcnZhbCA/IHNldHRpbmdzLmhlYXJ0YmVhdF9pbnRlcnZhbCA6IDIwMDAwLFxuXHRcdFx0bm90aWZpY2F0aW9ucyA9IFtdLFxuXHRcdFx0ZGlzbWlzc2FscyA9IFtdLFxuXHRcdFx0aGVhcnRiZWF0O1xuXG5cdFx0LyoqXG5cdFx0ICogQmluZCBkb20gZXZlbnRzXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBiaW5kX2V2ZW50cygpIHtcblx0XHRcdCQoICdib2R5JyApLm9uKCAnY2xpY2snLCAnLmxsbXMtbm90aWZpY2F0aW9uLWRpc21pc3MnLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5kaXNtaXNzKCAkKCB0aGlzICkuY2xvc2VzdCggJy5sbG1zLW5vdGlmaWNhdGlvbicgKSApO1xuXHRcdFx0fSApO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBBZGQgYSBkaXNtaXNzYWwgdG8gdGhlIGFycmF5IG9mIGRpc21pc3NhbHMgdG8gYmUgcHVzaGVkIHRvIHRoZSBzZXJ2ZXJcblx0XHQgKiBkdXJpbmcgdGhlIG5leHQgaGVhcnRiZWF0XG5cdFx0ICogQHBhcmFtICAgIGludCAgIGlkICBub3RpZmljYXRpb24gSURcblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBhZGRfZGlzbWlzc2FsKCBpZCApIHtcblx0XHRcdGlmICggLTEgPT09IGRpc21pc3NhbHMuaW5kZXhPZiggaWQgKSApIHtcblx0XHRcdFx0ZGlzbWlzc2Fscy5wdXNoKCBpZCApO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBDbGVhciB0aGUgY3VycmVudGx5IHJ1bm5pbmcgaGVhcnRiZWF0XG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBjbGVhcl9oZWFydGJlYXQoKSB7XG5cdFx0XHRjbGVhckludGVydmFsKCBoZWFydGJlYXQgKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogSGVhcnRiZWF0IGNhbGxiYWNrIGZ1bmN0aW9uXG5cdFx0ICogQHBhcmFtICAgIHtbdHlwZV19ICAgdHJpZ2dlciAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEByZXR1cm4gICB7W3R5cGVdfSAgICAgICAgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHRmdW5jdGlvbiBkb19oZWFydGJlYXQoIHRyaWdnZXIgKSB7XG5cblx0XHRcdHB1bXAoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGlmICggKCB0cmlnZ2VyICYmICd1bmxvYWQnID09PSB0cmlnZ2VyICkgfHwgISBzZWxmLmhhc19ub3RpZmljYXRpb25zICkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHRzZWxmLnNob3dfYWxsKCk7XG5cblx0XHRcdH0gKTtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBIZWFydGJlYXQgZnVuY3Rpb25cblx0XHQgKiBAcGFyYW0gICAge0Z1bmN0aW9ufSAgY2IgIGNhbGxiYWNlXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHRwdW1wID0gZnVuY3Rpb24oIGNiICkge1xuXG5cdFx0XHR2YXIgY2xlYXJfZGlzbWlzc2FscyA9IGRpc21pc3NhbHMubGVuZ3RoID8gdHJ1ZSA6IGZhbHNlO1xuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAnbm90aWZpY2F0aW9uc19oZWFydGJlYXJ0Jyxcblx0XHRcdFx0XHRkaXNtaXNzYWxzOiBkaXNtaXNzYWxzLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdGlmICggc2VsZi5ibG9ja19hamF4ICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZXN0YXJ0X2hlYXJ0YmVhdCA9IHRydWU7XG5cdFx0XHRcdFx0XHRjbGVhcl9oZWFydGJlYXQoKTtcblx0XHRcdFx0XHRcdGNiKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0c2VsZi5ibG9ja19hamF4ID0gdHJ1ZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRpZiAoIHNlbGYucmVzdGFydF9oZWFydGJlYXQgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlc3RhcnRfaGVhcnRiZWF0ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRzdGFydF9oZWFydGJlYXQoKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzZWxmLmJsb2NrX2FqYXggPSBmYWxzZTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdGRpc21pc3NhbHMgPSBjbGVhcl9kaXNtaXNzYWxzID8gW10gOiBkaXNtaXNzYWxzO1xuXG5cdFx0XHRcdFx0aWYgKCByLnN1Y2Nlc3MgJiYgci5kYXRhICkge1xuXHRcdFx0XHRcdFx0c2VsZi5xdWV1ZSggci5kYXRhLm5ldyApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGNiKCk7XG5cblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFN0YXJ0IHRoZSBoZWFydGJlYXRcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdGZ1bmN0aW9uIHN0YXJ0X2hlYXJ0YmVhdCgpIHtcblx0XHRcdGhlYXJ0YmVhdCA9IHNldEludGVydmFsKCBkb19oZWFydGJlYXQsIGhlYXJ0YmVhdF9pbnRlcnZhbCApO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBQcmV2ZW50IG11bHRpcGxlIHNpbXVsdGFuZW91cyBhamF4IGNhbGxzIGZyb20gYmVpbmcgbWFkZVxuXHRcdCAqIEB0eXBlICB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHR0aGlzLmJsb2NrX2FqYXggPSBmYWxzZTtcblxuXHRcdC8qKlxuXHRcdCAqIElmIGEgaGVhcnRiZWF0IHJlcXVlc3QgaXMgYmxvY2tlZCwgdGhpcyB3aWxsIGJlIHVzZWQgdG8gcmVzdGFydCBpdFxuXHRcdCAqIEB0eXBlICB7Qm9vbGVhbn1cblx0XHQgKi9cblx0XHR0aGlzLnJlc3RhcnRfaGVhcnRiZWF0ID0gZmFsc2U7XG5cblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy44LjBcblx0XHQgKiBAdmVyc2lvbiAgMy44LjBcblx0XHQgKi9cblx0XHR0aGlzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHRpZiAoICEgdGhpcy5pc191c2VyX2xvZ2dlZF9pbigpICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkb19oZWFydGJlYXQoICd1bmxvYWQnICk7XG5cdFx0XHR9O1xuXG5cdFx0XHRiaW5kX2V2ZW50cygpO1xuXG5cdFx0XHRkb19oZWFydGJlYXQoKTtcblx0XHRcdHN0YXJ0X2hlYXJ0YmVhdCgpO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIFF1ZXVlIG5vdGlmaWNhdGlvbnMgdG8gYmUgZGlzcGxheWVkXG5cdFx0ICogQHBhcmFtICAgIG9iamVjdCAgIG5ld19ub3RpcyAgYXJyYXkgb2Ygbm90aWZpY2F0aW9uc1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOC4wXG5cdFx0ICovXG5cdFx0dGhpcy5xdWV1ZSA9IGZ1bmN0aW9uKCBuZXdfbm90aXMgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0Zm9yICggdmFyIG4gaW4gbmV3X25vdGlzICkge1xuXG5cdFx0XHRcdGlmICggISBuZXdfbm90aXMuaGFzT3duUHJvcGVydHkoIG4gKSApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGFkZCB0aGUgbmV3IG5vdGlmaWNhdGlvbiBpZiBpdCBkb2VzbnQgZXhpc3Rcblx0XHRcdFx0aWYgKCBmYWxzZSA9PT0gc2VsZi5ub3RpZmljYXRpb25fZXhpc3RzKCBuZXdfbm90aXNbIG4gXS5pZCApICkge1xuXG5cdFx0XHRcdFx0bm90aWZpY2F0aW9ucy5wdXNoKCBuZXdfbm90aXNbIG4gXSApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fVxuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIERpc21pc3MgYSBub3RpZmljYXRpb25cblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJGVsICBub3RpZmljYXRpb24gZG9tIGVsZW1lbnRcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuZGlzbWlzcyA9IGZ1bmN0aW9uKCAkZWwgKSB7XG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cdFx0XHQkZWwucmVtb3ZlQ2xhc3MoICd2aXNpYmxlJyApO1xuXHRcdFx0YWRkX2Rpc21pc3NhbCggJGVsLmF0dHIoICdkYXRhLWlkJyApICk7XG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5yZXBvc2l0aW9uKCAkZWwubmV4dCggJy5sbG1zLW5vdGlmaWNhdGlvbi52aXNpYmxlJyApICk7XG5cdFx0XHR9LCAxMCApO1xuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBEZXRlcm1pbmUgaWYgYSBub3RpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gdGhlIG5vdGlmaWNhdGlvbnMgYXJyYXlcblx0XHQgKiBAcGFyYW0gICAgaW50ICAgICAgICBpZCAgbm90aWZpY2F0aW9uIGlkXG5cdFx0ICogQHJldHVybiAgIGludHxmYWxzZSAgICAgIGluZGV4IG9mIHRoZSBub3RpZmljYXRpb24gaW4gdGhlIGFycmF5IE9SIGZhbHNlIGlmIG5vdCBmb3VuZFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMubm90aWZpY2F0aW9uX2V4aXN0cyA9IGZ1bmN0aW9uKCBpZCApIHtcblxuXHRcdFx0Zm9yICggdmFyIG5vdGkgaW4gbm90aWZpY2F0aW9ucyApIHtcblxuXHRcdFx0XHRpZiAoICEgbm90aWZpY2F0aW9ucy5oYXNPd25Qcm9wZXJ0eSggbm90aSApICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBpZCA9PT0gbm90aWZpY2F0aW9uc1sgbm90aSBdLmlkICkge1xuXHRcdFx0XHRcdHJldHVybiBub3RpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXG5cdFx0fTtcblxuXHRcdC8qKlxuXHRcdCAqIEdldCB0aGUgdmVydGlhY2wgb2Zmc2V0IChvbiBzY3JlZW4pIHJlbGF0aXZlIHRvIGFuIGVsZW1lbnRcblx0XHQgKiB1c2VkIGZvciBub3RpZmljYXRpb24gcG9zaXRpaW9uaW5nXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICRyZWxhdGl2ZV9lbCAgZWxlbWVudCB0byBnZXQgYW4gb2Zmc2V0IHJlbGF0aXZlIHRvXG5cdFx0ICogQHJldHVybiAgIGludFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuZ2V0X29mZnNldCA9IGZ1bmN0aW9uKCAkcmVsYXRpdmVfZWwgKSB7XG5cblx0XHRcdHZhciBzcGFjZXIgPSAxMjtcblxuXHRcdFx0aWYgKCAhICRyZWxhdGl2ZV9lbCApIHtcblx0XHRcdFx0JHJlbGF0aXZlX2VsID0gJCggJy5sbG1zLW5vdGlmaWNhdGlvbi52aXNpYmxlJyApLmxhc3QoKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoICEgJHJlbGF0aXZlX2VsLm9mZnNldCgpICkge1xuXHRcdFx0XHRyZXR1cm4gMjQ7XG5cdFx0XHR9XG5cblx0XHRcdHZhciB0b3AgPSAkcmVsYXRpdmVfZWwub2Zmc2V0KCkudG9wLFxuXHRcdFx0XHRoZWlnaHQgPSAkcmVsYXRpdmVfZWwub3V0ZXJIZWlnaHQoKTtcblxuXHRcdFx0cmV0dXJuIHRvcCArIGhlaWdodCArIHNwYWNlcjtcblxuXHRcdH07XG5cblx0XHQvKipcblx0XHQgKiBEZXRlcm1pbmUgaWYgdGhlcmUgYXJlIG5vdGlmaWNhdGlvbnMgdG8gc2hvd1xuXHRcdCAqIEByZXR1cm4gICBCb29sZWFuXG5cdFx0ICogQHNpbmNlICAgIDMuOC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOC4wXG5cdFx0ICovXG5cdFx0dGhpcy5oYXNfbm90aWZpY2F0aW9ucyA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuICggbm90aWZpY2F0aW9ucy5sZW5ndGggKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogRGV0ZXJtaW5lIGlmIGEgdXNlciBpcyBsb2dnZWQgaW5cblx0XHQgKiBAcmV0dXJuICAgYm9vbGVhblxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuaXNfdXNlcl9sb2dnZWRfaW4gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiAkKCAnYm9keScgKS5oYXNDbGFzcyggJ2xvZ2dlZC1pbicgKTtcblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogUmVwb3NpdGlvbiBlbGVtZW50cywgc3RhcnRpbmcgd2l0aCB0aGUgc3BlY2lmaWVkIGVsZW1lbnRcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHN0YXJ0X2VsICBlbGVtZW50IHRvIHN0YXJ0IHJlcG9zaXRpb25pbmcgd2l0aFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuOC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOC4wXG5cdFx0ICovXG5cdFx0dGhpcy5yZXBvc2l0aW9uID0gZnVuY3Rpb24oICRzdGFydF9lbCApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRzZWxlY3RvciA9ICcubGxtcy1ub3RpZmljYXRpb24udmlzaWJsZScsXG5cdFx0XHRcdCRuZXh0X2VsO1xuXG5cdFx0XHRpZiAoICEgJHN0YXJ0X2VsLmxlbmd0aCApIHtcblx0XHRcdFx0JHN0YXJ0X2VsID0gJCggc2VsZWN0b3IgKS5maXJzdCgpO1xuXHRcdFx0fVxuXG5cdFx0XHQkc3RhcnRfZWwuY3NzKCAndG9wJywgc2VsZi5nZXRfb2Zmc2V0KCAkc3RhcnRfZWwucHJldkFsbCggc2VsZWN0b3IgKS5maXJzdCgpICkgKTtcblxuXHRcdFx0JG5leHRfZWwgPSAkc3RhcnRfZWwubmV4dCggc2VsZWN0b3IgKTtcblx0XHRcdGlmICggJG5leHRfZWwubGVuZ3RoICkge1xuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzZWxmLnJlcG9zaXRpb24oICRuZXh0X2VsICk7XG5cdFx0XHRcdH0sIDE1MCApO1xuXHRcdFx0fVxuXG5cblx0XHR9O1xuXG5cdFx0LyoqXG5cdFx0ICogU2hvdyBhbGwgcXVldWVkIG5vdGlmaWNhdGlvbnNcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuc2hvd19hbGwgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0aW50ZXJ2YWw7XG5cblx0XHRcdGludGVydmFsID0gc2V0SW50ZXJ2YWwoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdGlmICggaSA8IG5vdGlmaWNhdGlvbnMubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0aWYgKCAhIG5vdGlmaWNhdGlvbnNbIGkgXS5zaG93biApIHtcblx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbnNbIGkgXS5zaG93biA9IHRydWU7XG5cdFx0XHRcdFx0XHRzZWxmLnNob3dfb25lKCBub3RpZmljYXRpb25zWyBpIF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aSsrO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRjbGVhckludGVydmFsKCBpbnRlcnZhbCApO1xuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSwgMTAwICk7XG5cblx0XHR9XG5cblx0XHQvKipcblx0XHQgKiBTaG93IGEgc2luZ2xlIG5vdGlmaWNhdGlvblxuXHRcdCAqIEBwYXJhbSAgICBvYmplY3QgICBuICBub3RpZmljYXRpb24gb2JqZWN0IGRhdGFcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjguMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjguMFxuXHRcdCAqL1xuXHRcdHRoaXMuc2hvd19vbmUgPSBmdW5jdGlvbiggbiApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHQkaHRtbCA9ICQoIG4uaHRtbCApO1xuXG5cdFx0XHQkaHRtbC5maW5kKCAnYScgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApO1xuXHRcdFx0XHRhZGRfZGlzbWlzc2FsKCAkaHRtbC5hdHRyKCAnZGF0YS1pZCcgKSApO1xuXHRcdFx0XHR3aW5kb3cubG9jYXRpb24gPSAkdGhpcy5hdHRyKCAnaHJlZicgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0JCggJ2JvZHknICkuYXBwZW5kKCAkaHRtbCApO1xuXHRcdFx0JGh0bWwuY3NzKCAndG9wJywgc2VsZi5nZXRfb2Zmc2V0KCkgKTtcblxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCRodG1sLmFkZENsYXNzKCAndmlzaWJsZScgKTtcblx0XHRcdH0sIDEgKTtcblxuXHRcdFx0Ly8gaWYgaXQncyBhdXRvIGRpc21pc3NpbmcsIHNldCB1cCBhIGRpc21pc3NhbFxuXHRcdFx0aWYgKCAkaHRtbC5hdHRyKCAnZGF0YS1hdXRvLWRpc21pc3MnICkgKSB7XG5cdFx0XHRcdC8vIGF1dG9tYXRpY2FsbHkgc2NoZWR1bGUgYXV0b21hdGljIGRpc21pc3NhbHNcblx0XHRcdFx0Ly8gdG8gcHJldmVudCB0aGUgbm90aWZpY2F0aW9uIGZyb20gZGlzcGxheWluZyBhZ2FpblxuXHRcdFx0XHQvLyBpZiB0aGUgYXV0by1kaXNtaXNzIHRpbWVvdXQgaXNuJ3QgcmVhY2hlZFxuXHRcdFx0XHQvLyBiZWZvcmUgdGhlIHBhZ2UgdW5sb2Fkc1xuXHRcdFx0XHRhZGRfZGlzbWlzc2FsKCAkaHRtbC5hdHRyKCAnZGF0YS1pZCcgKSApO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRzZWxmLmRpc21pc3MoICRodG1sICk7XG5cdFx0XHRcdH0sICRodG1sLmF0dHIoICdkYXRhLWF1dG8tZGlzbWlzcycgKSApO1xuXHRcdFx0fVxuXG5cblx0XHR9XG5cblx0XHQvLyBpbml0YWxpemVcblx0XHR0aGlzLmluaXQoKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXG5cdH07XG5cblx0d2luZG93LmxsbXMgPSB3aW5kb3cubGxtcyB8fCB7fTtcblx0d2luZG93LmxsbXMubm90aWZpY2F0aW9ucyA9IG5ldyBsbG1zX25vdGlmaWNhdGlvbnMoKTtcblxufSApKCBqUXVlcnkgKTtcbiJdfQ==
